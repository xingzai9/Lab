<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>课程管理系统-登录</title>
    <!--引入jquery-->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.2/dist/jquery.min.js"></script>
    <script rel="stylesheet" type="text/javascript" src="../../static/js/jquery-3.4.1.js"></script>
    <!--动态-->
    <link rel="stylesheet" href="../layui/css/layui.css">
    <script src="../layui/layui.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/login.css">
    <!--静态调试-->
    <link rel="stylesheet" type="text/css" href="../../static/layui/css/layui.css">
    <script type="text/javascript" src="../../static/layui/layui.js"></script>
    <link rel="stylesheet" type="text/css" href="../../static/css/login.css">
    <style type="text/css">
        th {
            width: 70px;
            height: 50px;
            text-align: center;
        }

        td {
            width: 70px;
            height: 100px;
            text-align: center;
        }

        #number {
            width: 70px;
            height: 100px;
        }
        .layui-form-select {
			width: 800px;
			/*height:60px;*/
		}
		.layui-form-item .layui-input {
    		width: 800px;
		}

    </style>
</head>
<body>


<div class="layui-layout layui-layout-admin">
    <div class="layui-header layui-bg-cyan">
        <div class="layui-logo layui-hide-xs layui-bg-cyan">实验室管理系统</div>
        <!-- 头部区域（可配合layui 已有的水平导航） -->
        <ul class="layui-nav layui-layout-left layui-bg-cyan" lay-filter=""> 
            <!-- 移动端显示 -->
            <li class="layui-nav-item layui-show-xs-inline-block layui-hide-sm" lay-header-event="menuLeft">
                <i class="layui-icon layui-icon-spread-left layui-bg-cyan"></i>
            </li>
            <li class="layui-nav-item layui-hide-xs layui-bg-cyan ">
                <a href="#" th:href="@{/tea/toModifyInfo}">个人信息</a>
            </li>
            <li class="layui-nav-item layui-hide-xs layui-bg-cyan">
                <a href="#" th:href="@{/tea/toMyStudent}">我的学生</a>
            </li>
            <li class="layui-nav-item layui-this">
                <a href="#" th:href="@{/tea/toReserve}">预约实验</a>
			    <dl class="layui-nav-child"> <!-- 二级菜单 -->
                    <dd><a href="#" th:href="@{/tea/toReserve}">初步预约信息</a></dd>
                    <dd><a href="#" th:href="@{/tea/toReserveDetail}">具体时间选择</a></dd>
			    </dl>
  			</li>
            <li class="layui-nav-item layui-hide-xs layui-bg-cyan">
                <a href="#" th:href="@{/tea/toMyMessage}">我的通知</a>
            </li>
        </ul>
        <ul class="layui-nav layui-layout-right layui-bg-cyan">
            <li  id="username" class="layui-nav-item layui-hide layui-show-md-inline-block">
                <!--                <a id="username" href="javascript:;" th:href="@{/stu/toModifyInfo}"></a>-->
            </li>
            <li class="layui-nav-item layui-hide layui-show-md-inline-block">
                <a href="javascript:;" th:href="@{/logout}">
                    退出
                    <i class="layui-icon layui-icon-down layui-nav-more"></i></a>
                <dl class="layui-nav-child layui-anim layui-anim-upbit">
                    <dd><a href="">Your Profile</a></dd>
                    <dd><a href="">Settings</a></dd>
                    <dd><a href="">Sign out</a></dd>
                </dl>
            </li>
            <li class="layui-nav-item" lay-header-event="menuRight" lay-unselect="">
                <a href="javascript:;">
                    <i class="layui-icon layui-icon-more-vertical"></i>
                </a>
            </li>
            <span class="layui-nav-bar" style="left: 165.913px; width: 0px; opacity: 0; top: 56px;"></span></ul>
    </div>
    <div class="layui-body">
        <!-- 内容主体区域 -->
        <!--    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">-->
        <!--      <legend>课程表</legend>-->
        <!--    </fieldset>-->
        <div class="layui-row ">
    <div class="layui-side layui-bg-green">
        <div class="layui-side-scroll layui-bg-green">
            <!-- 左侧导航区域（可配合layui已有的垂直导航） -->
            <ul class="layui-nav layui-nav-tree layui-bg-green" lay-filter="test">
                <li class="layui-nav-item">
                    <dd><a href="#" th:href="@{/tea/toReserveRecord}">预约历史记录</a></dd>
                </li>
                <li class="layui-nav-item">
                    <a href="#" th:href="@{/tea/toMyTrial}">我的实验课程</a>
                </li>
                <li class="layui-nav-item">
                    <a href="#" th:href="@{/tea/toLookTeaReserve}">查看我的预约</a>
                </li>
                <li class="layui-nav-item">
                <a href="#" th:href="@{/tea/toLookStuReserve}">查看学生预约</a>
            </li>
                <li class="layui-nav-item">
                    <a href="#" th:href="@{/tea/toMostValueReserve}">求取最佳预约</a>
                </li>
                <span class="layui-nav-bar"></span></ul>
        </div>
    </div>
           <div class="layui-container" style="margin-top: 30px" align="left" >
           	<h1>教师预约情况登记</h1>
           </div>
            <div class="layui-col-md1" style="margin-top: 30px;">
                
                <div class="layui-container" style="margin-top: 30px" >
			<form class="layui-form" action="">
			    <div class="layui-form-item">
			        <label class="layui-form-label">学院</label>
			        <div class="layui-input-block">
			            <select id="department" name="department" lay-verify="required" lay-filter="department">
			                
			            </select>
			        </div>
			    </div>
			    <div class="layui-form-item">
			        <label class="layui-form-label">实验室名称</label>
			        <div class="layui-input-block">
			            <select id="laboratory" name="laboratory" lay-verify="required">
			                
			            </select>
			        </div>
			    </div>
			    
			    <!--<div class="layui-form-item">
			        <label class="layui-form-label">周次</label>
			        <div class="layui-input-block">
			            <select id="week" name="week" lay-verify="required">
			                
			            </select>
			        </div> 
			    </div>-->
			    <div class="layui-form-item">
        <label class="layui-form-label">课时</label>
        <div class="layui-input-block">
            <select id="class_time" name="class_time" lay-verify="required">
                <option value=""></option>
                <option value="16课时">16课时</option>
                <option value="32课时">32课时</option>
                <option value="48课时">48课时</option>
                <option value="64课时">64课时</option>
                <option value="80课时">80课时</option>
                <option value="96课时">96课时</option>
            </select>
        </div>
    </div>
    			<div class="layui-form-item">
			        <label class="layui-form-label">实验名称</label>
                    <div class="layui-input-block">
                        <select id="trial_name" name="laboratory" lay-verify="required">

                        </select>
                    </div>
			 	</div>  
			 	<div class="layui-form-item">
			        <label class="layui-form-label">实验次数</label>
			        <!--<div class="layui-input-block">
			            <input id="trial_times" type="text" name="trial_times" required lay-verify="required" placeholder="请输入整数" autocomplete="off" class="layui-input">
			        </div>-->
			        <div class="layui-input-block">
				        <select id="trial_times" name="trial_times" lay-verify="required">
			                <option value=""></option>
			                <option value="1">1</option>
			                <option value="2">2</option>
			                <option value="3">3</option>
			                <option value="4">4</option>
			                <option value="5">5</option>
			                <option value="6">6</option>
			                <option value="7">7</option>
			                <option value="8">8</option>
			                <option value="9">9</option>
			                <option value="10">10</option>
	            		</select>
	            </div>
			 	</div>  
			    <div class="layui-form-item">
			        <label class="layui-form-label">实验人数</label>
			        <div class="layui-input-block">
			            <input οninput="value=value.replace(/^(0+)|[^\d]+/g,'')" id="trial_num" type="text" name="trial_num" required lay-verify="required" placeholder="请输入实验人数" autocomplete="off" class="layui-input">
			        </div>
			 	</div>  
			    <div class="layui-form-item">
			        <div class="layui-input-block">
			            <button id="btn" class="layui-btn" lay-submit lay-filter="btn">确认</button>
			            <button type="reset" class="layui-btn layui-btn-primary">重置</button>
			        </div>
			    </div>
			</form>
                </div>
            </div>
            </div>
    </div>
</div>
<!--课程表-->
<script>
   layui.use(['element','table','form','laydate','layer'], function(){
        var form = layui.form;
		var laydate = layui.laydate;
		var $ = layui.jquery;
		var layer = layui.layer;
		var table = layui.table;
        $.getJSON("http://localhost:8080/tea/getSession",function(d){
           console.log("session"+d.data)
           var username = d.data
           var str = "<a href='/tea/toModifyInfo' >欢迎教师用户" + username + "</a>";
           $('#username').html(str);
       })
        form.on('submit(btn)',function(data){
           $.getJSON("http://localhost:8080/tea/teaReserveInfo",{
               department:$("#department").val(),
               laboratory:$("#laboratory").val(),
               class_time:$("#class_time").val(),
               trial_times:$("#trial_times").val(),
               trial_num:$("#trial_num").val(),
               trial_name:$("#trial_name").val()},
                function(d){//提交初步预约方案
           	    console.log(d);
			    if(d.status == 1){
                    layer.alert("请提交正确人数",{
                        yes:function (index) {
                        layer.close(index);
                    }
				});
                }
                else{
                    layer.alert("确认提交",{
                     yes:function () {
                        location.href=("/tea/toReserveDetail?department="+$("#department").val()+"&laboratory="+$("#laboratory").val());
                    }})
                    }
                });
			    return false;
		});
       $.getJSON("http://localhost:8080/getDepartmentList",function(d){

           if(d.status == 1){
               layer.msg(d.msg);
           }
           else{
               var list = d.data;
               var str = "<option value=''></option>";
               for(var i=0;i<list.length;i++){
                   str += "<option value=\"" + list[i]+"\">" + list[i] + "</option>";
               }

               $("#department").html(str);
               form.render("select");
           }
       })
       $.getJSON("http://localhost:8080/tea/getTrialList",function(d){

           if(d.status == 1){
               layer.msg(d.msg);
           }
           else{
               var list = d.data;
               var str = "<option value=''></option>";
               for(var i=0;i<list.length;i++){
                   str += "<option value=\"" + list[i]+"\">" + list[i] + "</option>";
               }

               $("#trial_name").html(str);
               form.render("select");
           }
       })
       form.on('select(department)',function(data){
           $.getJSON("http://localhost:8080/getLaboratoryListByDepartment",{Department:data.value},function(d){
               console.log($("#department").val());
               if(d.status == 1){
                   layer.msg(d.msg);
               }
               else{
                   var list = d.data;
                   var str = "<option value=''></option>";
                   for(var i=0;i<list.length;i++){
                       str += "<option value=\"" + list[i]+"\">" + list[i] + "</option>";
                   }

                   $("#laboratory").html(str);
                   form.render("select");
               }
           })

       })
   });
</script>
</body>
</html>